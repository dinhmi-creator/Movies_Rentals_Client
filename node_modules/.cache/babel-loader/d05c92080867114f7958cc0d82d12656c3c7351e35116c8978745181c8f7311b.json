{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';// Import Link for navigation\nimport axios from'axios';import'../styles/style.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Memberships=()=>{const[memberships,setMemberships]=useState([]);const[formData,setFormData]=useState({membership_id:'',membership_type:'',membership_discount:''});const[isEditing,setIsEditing]=useState(false);useEffect(()=>{fetchMemberships();},[]);const fetchMemberships=()=>{axios.get('http://flip1.engr.oregonstate.edu:3002/api/memberships').then(response=>{setMemberships(response.data);}).catch(error=>{console.error(\"There was an error fetching the memberships data!\",error);});};const handleDelete=id=>{axios.delete(`http://flip1.engr.oregonstate.edu:3002/api/memberships/${id}`).then(()=>{setMemberships(memberships.filter(membership=>membership.membership_id!==id));}).catch(error=>{console.error(\"There was an error deleting the membership!\",error);});};const handleInputChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleFormSubmit=e=>{e.preventDefault();if(isEditing){axios.put(`http://flip1.engr.oregonstate.edu:3002/api/memberships/${formData.membership_id}`,formData).then(()=>{fetchMemberships();// Refresh the memberships list\nresetForm();}).catch(error=>{console.error(\"There was an error updating the membership!\",error);});}else{axios.post('/api/memberships',formData).then(()=>{fetchMemberships();// Refresh the memberships list\nresetForm();}).catch(error=>{console.error(\"There was an error creating the membership!\",error);});}};const handleEdit=membership=>{setFormData(membership);setIsEditing(true);};const resetForm=()=>{setFormData({membership_id:'',membership_type:'',membership_discount:''});setIsEditing(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/customers\",className:\"nav-link\",children:\"Customers\"}),/*#__PURE__*/_jsx(Link,{to:\"/memberships\",className:\"nav-link\",children:\"Memberships\"}),/*#__PURE__*/_jsx(Link,{to:\"/movies\",className:\"nav-link\",children:\"Movies\"}),/*#__PURE__*/_jsx(Link,{to:\"/payments\",className:\"nav-link\",children:\"Payments\"}),/*#__PURE__*/_jsx(Link,{to:\"/rentals\",className:\"nav-link\",children:\"Rentals\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Memberships List\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"membership_type\",placeholder:\"Membership Type\",value:formData.membership_type,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",name:\"membership_discount\",placeholder:\"Discount\",value:formData.membership_discount,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button actionButton\",children:isEditing?'Update Membership':'Create Membership'}),isEditing&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,className:\"button resetButton\",children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:memberships.map(membership=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:membership.membership_id}),/*#__PURE__*/_jsx(\"td\",{children:membership.membership_type}),/*#__PURE__*/_jsx(\"td\",{children:membership.membership_discount}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(membership),className:\"button actionButton\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(membership.membership_id),className:\"button deleteButton\",children:\"Delete\"})]})]},membership.membership_id))})]})]});};export default Memberships;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","Memberships","memberships","setMemberships","formData","setFormData","membership_id","membership_type","membership_discount","isEditing","setIsEditing","fetchMemberships","get","then","response","data","catch","error","console","handleDelete","id","delete","filter","membership","handleInputChange","e","name","value","target","handleFormSubmit","preventDefault","put","resetForm","post","handleEdit","className","children","to","onSubmit","type","placeholder","onChange","required","step","onClick","map"],"sources":["/nfs/stak/users/dinhmi/cs340_project/client/src/elements/Memberships.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';  // Import Link for navigation\nimport axios from 'axios';\nimport '../styles/style.css';  // Import the CSS file\n\nconst Memberships = () => {\n  const [memberships, setMemberships] = useState([]);\n  const [formData, setFormData] = useState({\n    membership_id: '',\n    membership_type: '',\n    membership_discount: ''\n  });\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    fetchMemberships();\n  }, []);\n\n  const fetchMemberships = () => {\n    axios.get('http://flip1.engr.oregonstate.edu:3002/api/memberships')\n      .then(response => {\n        setMemberships(response.data);\n      })\n      .catch(error => {\n        console.error(\"There was an error fetching the memberships data!\", error);\n      });\n  };\n\n  const handleDelete = (id) => {\n    axios.delete(`http://flip1.engr.oregonstate.edu:3002/api/memberships/${id}`)\n      .then(() => {\n        setMemberships(memberships.filter(membership => membership.membership_id !== id));\n      })\n      .catch(error => {\n        console.error(\"There was an error deleting the membership!\", error);\n      });\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleFormSubmit = (e) => {\n    e.preventDefault();\n    if (isEditing) {\n      axios.put(`http://flip1.engr.oregonstate.edu:3002/api/memberships/${formData.membership_id}`, formData)\n        .then(() => {\n          fetchMemberships(); // Refresh the memberships list\n          resetForm();\n        })\n        .catch(error => {\n          console.error(\"There was an error updating the membership!\", error);\n        });\n    } else {\n      axios.post('/api/memberships', formData)\n        .then(() => {\n          fetchMemberships(); // Refresh the memberships list\n          resetForm();\n        })\n        .catch(error => {\n          console.error(\"There was an error creating the membership!\", error);\n        });\n    }\n  };\n\n  const handleEdit = (membership) => {\n    setFormData(membership);\n    setIsEditing(true);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      membership_id: '',\n      membership_type: '',\n      membership_discount: ''\n    });\n    setIsEditing(false);\n  };\n\n  return (\n    <div className=\"container\">\n      {/* Navigation Links */}\n      <nav className=\"nav\">\n        <Link to=\"/\" className=\"nav-link\">Home</Link>\n        <Link to=\"/customers\" className=\"nav-link\">Customers</Link>\n        <Link to=\"/memberships\" className=\"nav-link\">Memberships</Link>\n        <Link to=\"/movies\" className=\"nav-link\">Movies</Link>\n        <Link to=\"/payments\" className=\"nav-link\">Payments</Link>\n        <Link to=\"/rentals\" className=\"nav-link\">Rentals</Link>\n      </nav>\n\n      <h1>Memberships List</h1>\n      <form onSubmit={handleFormSubmit} className=\"form\">\n        <input\n          type=\"text\"\n          name=\"membership_type\"\n          placeholder=\"Membership Type\"\n          value={formData.membership_type}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"number\"\n          step=\"0.01\"\n          name=\"membership_discount\"\n          placeholder=\"Discount\"\n          value={formData.membership_discount}\n          onChange={handleInputChange}\n          required\n        />\n        <button type=\"submit\" className=\"button actionButton\">\n          {isEditing ? 'Update Membership' : 'Create Membership'}\n        </button>\n        {isEditing && <button type=\"button\" onClick={resetForm} className=\"button resetButton\">Cancel</button>}\n      </form>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Type</th>\n            <th>Discount</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {memberships.map((membership) => (\n            <tr key={membership.membership_id}>\n              <td>{membership.membership_id}</td>\n              <td>{membership.membership_type}</td>\n              <td>{membership.membership_discount}</td>\n              <td>\n                <button onClick={() => handleEdit(membership)} className=\"button actionButton\">Edit</button>\n                <button onClick={() => handleDelete(membership.membership_id)} className=\"button deleteButton\">Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Memberships;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}