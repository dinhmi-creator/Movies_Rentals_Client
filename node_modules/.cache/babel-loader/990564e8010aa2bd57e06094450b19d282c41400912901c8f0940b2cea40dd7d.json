{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import'../styles/style.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Payments=()=>{const[payments,setPayments]=useState([]);const[formData,setFormData]=useState({payment_id:'',payment_amount:'',payment_date:'',payment_method:'',payment_status:''});const[isEditing,setIsEditing]=useState(false);useEffect(()=>{fetchPayments();},[]);const fetchPayments=()=>{axios.get('http://flip1.engr.oregonstate.edu:30858/api/payments').then(response=>{setPayments(response.data);}).catch(error=>{console.error(\"There was an error fetching the payments data!\",error);});};const handleDelete=id=>{axios.delete(`http://flip1.engr.oregonstate.edu:30858/api/payments/${id}`).then(()=>{setPayments(payments.filter(payment=>payment.payment_id!==id));}).catch(error=>{console.error(\"There was an error deleting the payment!\",error);});};const handleInputChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleFormSubmit=e=>{e.preventDefault();if(isEditing){axios.put(`http://flip1.engr.oregonstate.edu:30858/api/payments/${formData.payment_id}`,formData).then(()=>{fetchPayments();// Refresh the payments list\nresetForm();}).catch(error=>{console.error(\"There was an error updating the payment!\",error);});}else{axios.post('http://flip1.engr.oregonstate.edu:30858/api/payments',formData).then(()=>{fetchPayments();// Refresh the payments list\nresetForm();}).catch(error=>{console.error(\"There was an error creating the payment!\",error);});}};const handleEdit=payment=>{setFormData(payment);setIsEditing(true);};const resetForm=()=>{setFormData({payment_id:'',payment_amount:'',payment_date:'',payment_method:'',payment_status:''});setIsEditing(false);};const formatDate=dateString=>{const options={year:'numeric',month:'long',day:'numeric'};return new Date(dateString).toLocaleDateString(undefined,options);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/customers\",className:\"nav-link\",children:\"Customers\"}),/*#__PURE__*/_jsx(Link,{to:\"/memberships\",className:\"nav-link\",children:\"Memberships\"}),/*#__PURE__*/_jsx(Link,{to:\"/movies\",className:\"nav-link\",children:\"Movies\"}),/*#__PURE__*/_jsx(Link,{to:\"/payments\",className:\"nav-link\",children:\"Payments\"}),/*#__PURE__*/_jsx(Link,{to:\"/rentals\",className:\"nav-link\",children:\"Rentals\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Payments List\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",name:\"payment_amount\",placeholder:\"Amount\",value:formData.payment_amount,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"payment_date\",placeholder:\"Date\",value:formData.payment_date,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"payment_method\",placeholder:\"Method\",value:formData.payment_method,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"payment_status\",placeholder:\"Status\",value:formData.payment_status,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button actionButton\",children:isEditing?'Update Payment':'Create Payment'}),isEditing&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,className:\"button resetButton\",children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Method\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:payments.map(payment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:payment.payment_id}),/*#__PURE__*/_jsx(\"td\",{children:payment.payment_amount}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(payment.payment_date)}),\" \",/*#__PURE__*/_jsx(\"td\",{children:payment.payment_method}),/*#__PURE__*/_jsx(\"td\",{children:payment.payment_status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(payment),className:\"button actionButton\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(payment.payment_id),className:\"button deleteButton\",children:\"Delete\"})]})]},payment.payment_id))})]})]});};export default Payments;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","Payments","payments","setPayments","formData","setFormData","payment_id","payment_amount","payment_date","payment_method","payment_status","isEditing","setIsEditing","fetchPayments","get","then","response","data","catch","error","console","handleDelete","id","delete","filter","payment","handleInputChange","e","name","value","target","handleFormSubmit","preventDefault","put","resetForm","post","handleEdit","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","undefined","className","children","to","onSubmit","type","step","placeholder","onChange","required","onClick","map"],"sources":["/nfs/stak/users/dinhmi/cs340_project/client/src/elements/Payments.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport '../styles/style.css';  // Import the CSS file\n\nconst Payments = () => {\n  const [payments, setPayments] = useState([]);\n  const [formData, setFormData] = useState({\n    payment_id: '',\n    payment_amount: '',\n    payment_date: '',\n    payment_method: '',\n    payment_status: ''\n  });\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    fetchPayments();\n  }, []);\n\n  const fetchPayments = () => {\n    axios.get('http://flip1.engr.oregonstate.edu:30858/api/payments')\n      .then(response => {\n        setPayments(response.data);\n      })\n      .catch(error => {\n        console.error(\"There was an error fetching the payments data!\", error);\n      });\n  };\n\n  const handleDelete = (id) => {\n    axios.delete(`http://flip1.engr.oregonstate.edu:30858/api/payments/${id}`)\n      .then(() => {\n        setPayments(payments.filter(payment => payment.payment_id !== id));\n      })\n      .catch(error => {\n        console.error(\"There was an error deleting the payment!\", error);\n      });\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleFormSubmit = (e) => {\n    e.preventDefault();\n    if (isEditing) {\n      axios.put(`http://flip1.engr.oregonstate.edu:30858/api/payments/${formData.payment_id}`, formData)\n        .then(() => {\n          fetchPayments(); // Refresh the payments list\n          resetForm();\n        })\n        .catch(error => {\n          console.error(\"There was an error updating the payment!\", error);\n        });\n    } else {\n      axios.post('http://flip1.engr.oregonstate.edu:30858/api/payments', formData)\n        .then(() => {\n          fetchPayments(); // Refresh the payments list\n          resetForm();\n        })\n        .catch(error => {\n          console.error(\"There was an error creating the payment!\", error);\n        });\n    }\n  };\n\n  const handleEdit = (payment) => {\n    setFormData(payment);\n    setIsEditing(true);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      payment_id: '',\n      payment_amount: '',\n      payment_date: '',\n      payment_method: '',\n      payment_status: ''\n    });\n    setIsEditing(false);\n  };\n\n  const formatDate = (dateString) => {\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\n    return new Date(dateString).toLocaleDateString(undefined, options);\n  };\n\n  return (\n    <div className=\"container\">\n      <nav className=\"nav\">\n        <Link to=\"/\" className=\"nav-link\">Home</Link>\n        <Link to=\"/customers\" className=\"nav-link\">Customers</Link>\n        <Link to=\"/memberships\" className=\"nav-link\">Memberships</Link>\n        <Link to=\"/movies\" className=\"nav-link\">Movies</Link>\n        <Link to=\"/payments\" className=\"nav-link\">Payments</Link>\n        <Link to=\"/rentals\" className=\"nav-link\">Rentals</Link>\n      </nav>\n      <h1>Payments List</h1>\n      <form onSubmit={handleFormSubmit} className=\"form\">\n        <input\n          type=\"number\"\n          step=\"0.01\"\n          name=\"payment_amount\"\n          placeholder=\"Amount\"\n          value={formData.payment_amount}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"date\"\n          name=\"payment_date\"\n          placeholder=\"Date\"\n          value={formData.payment_date}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"payment_method\"\n          placeholder=\"Method\"\n          value={formData.payment_method}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"payment_status\"\n          placeholder=\"Status\"\n          value={formData.payment_status}\n          onChange={handleInputChange}\n          required\n        />\n        <button type=\"submit\" className=\"button actionButton\">\n          {isEditing ? 'Update Payment' : 'Create Payment'}\n        </button>\n        {isEditing && <button type=\"button\" onClick={resetForm} className=\"button resetButton\">Cancel</button>}\n      </form>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Amount</th>\n            <th>Date</th>\n            <th>Method</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {payments.map((payment) => (\n            <tr key={payment.payment_id}>\n              <td>{payment.payment_id}</td>\n              <td>{payment.payment_amount}</td>\n              <td>{formatDate(payment.payment_date)}</td> {/* Formatted Date */}\n              <td>{payment.payment_method}</td>\n              <td>{payment.payment_status}</td>\n              <td>\n                <button onClick={() => handleEdit(payment)} className=\"button actionButton\">Edit</button>\n                <button onClick={() => handleDelete(payment.payment_id)} className=\"button deleteButton\">Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Payments;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}